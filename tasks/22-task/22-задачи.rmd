---
title: "Решение 22-го задания"
geometry: "top=1.5cm,bottom=2.5cm,left=1.5cm,right=1.5cm"
documentclass: extreport
fontsize: 14pt
header-includes:
- \usepackage[utf8]{inputenc}
- \usepackage[english, russian]{babel}
- \usepackage{fontspec}
- \usepackage[default]{droidserif}
- \usepackage[defaultsans]{droidsans}
- \usepackage[defaultmono]{droidsansmono}
output:
  pdf_document:
    number_sections: false
    latex_engine: xelatex
    pandoc_args: ["--highlight-style=tango"]
    extra_dependencies:
        - hyperref
        - setspace
        - amsmath
        - tikz
linkcolor: blue
---

\tableofcontents

\chapter{Маленькое введение}
1. Независимые процессы могут работать в любое время. \label{1}

\chapter{Используем Excel}
\section{Ищем макс. продолжительность работы четырех процессов}

![](../../data/22-images/15337-kompege.png)

1) Делаем столбцы справа от данных чуть меньше, чтобы удобнее было заполнять их.

![](../../data/22-images/1.png){width=80%}

2) Занимаем для каждого ID процесса свои "места", т.е. заполняем измененные столбцы тем кол-вом единиц, которому равно время выполнения процесса. Например, первый процесс занимает 5 мс, значит, заполняем 5 ячеек единицами. А вот 3 процесс может начинаться после завершения первого или второго, следовательно, его единицы должны начинаться дальше оп горизонтали, чем у первого и второго. Заполняем следующим образом:

\center{![](../../data/22-images/2.png){width=80%}}

3) Напишем формулу для подсчета кол-ва единиц в текущем столбце (у меня формулы на английском, у вас могут быть на русском):

![](../../data/22-images/3.png){width=80%}

4) Может показаться, что работа сделана, но если немного подумать, то поймете, что ошиблись в ответе. Нам сказано найти НАИБОЛЬШУЮ продолжительность отрезка с одновременной работой 5 процессов.
- Вспомним \hyperref[1]{пункт 1}. Мы можем передвигать независимые процессы. Так давайте сделаем так с процессами 9, 10 и 11:

![](../../data/22-images/4.png){width=80%}

5) Так мы получим НАИБОЛЬШУЮ продолжительность: \boxed{8}

\section{Другое решение}

\chapter{Используем дерево}
\section{Ищем макс. продолжительность работы четырех процессов}

1) Нарисуем схему для независимых процессов (будем считать, что они зависимы от нулевого процесса):

![](../../data/22-images/1-draw.png){width=35%}

2) Далее нарисуем схемы зависимости остальных процессов:

![](../../data/22-images/2-draw.png){width=60%}

3) Подпишем радом с каждым процессом его длительность:

![](../../data/22-images/3-draw.png){width=60%}

4) Суть заключается в том, что мы можем объединять последовательные процессы (например, процесс 4 и 6). Также мы можем находить общее кол-во времени у параллельных процессов.

![](../../data/22-images/4-draw.png){width=50%}

- Здесь мы объединяем процесс 4 и 6, в результате чего получаем (один новый) процесс длительностью 11 мс времени.
- Находим общее кол-во времени у получившегося процесса с 5-ым процессом. Это будет 8 мс. Причем считается, что задействовано только два процесса.
- Это можно легко понять, рассмотрев данные элементы в Excel, где удобная форма для понимания работы процессов.

5) Давайте найдем оптимальный выбор с помощью таких объединений и общих сумм:

![](../../data/22-images/5-draw.png){width=70%}

- Здесь мы объединили процессы 4 и 6 (будет процессом A), 10 и 12 (B), 11 и 13 (C).
- Далее нашли общую сумму для процессов A и 5, а также для процессов B и C. Мы смогли сделать такое "пересечение", т.к. процессы 10 и 11 независимы, следовательно, они могут передвигаться куда угодно (и их зависимые процессы вместе с ними).
- Нашли общее время у этих сумм и получили \boxed{8}

\section{Ищем макс. продолжительность работы четырех процессов (2)}

![](../../data/22-images/10593-kompege.png)

1) Составим схему зависимостей процессов:

![](../../data/22-images/10593-1-draw.png){width=60%}

2) Напишем время выполнения для каждого:

![](../../data/22-images/10593-2-draw.png){width=65%}

3) Найдем макс. продолжительность:

![](../../data/22-images/10593-3-draw.png){width=65%}

4) Получаем ответ: \boxed{55}

\chapter{Использование ВПР}
\section{Ищем мин. время работы всех процессов}

![](../../data/22-images/12807-kompege.png)

1) Разобъем зависимости на отдельные ячейки (в LibreOffice `Данные -> Текст по столбцам`):

![](../../data/22-images/12807-1-image.png){width=70%}

2) "Займем" справа то кол-во столбцов, которое равно макс. кол-ву зависимостей из каждого процесса (в нашем случае, столбцов добавится три):

![](../../data/22-images/12807-2-image.png){width=70%}

3) Удаляем заголовки для столбцов и вместо них ставим ноль в самую первую ячейку, а также ставим ноль в начало столбца, в котором будет время каждого процесса:y

![](../../data/22-images/12807-3-image.png){width=70%}

4) Запишем пока что неправильные значения времени для каждого процесса в тот столбец, куда мы поставили ноль. Причем к значению времени процесса будем суммировать значения (которых пока нет) времени его зависимостей:

![](../../data/22-images/12807-4-image.png){width=70%}

5) Теперь воспользуемся функцией ВПР со следующими аргументами:
    1. ID процесса-зависимости
    2. Таблица (у нас будет браться диапазон от A до K). Важно, чтобы эти буквы не менялись при "растяжении" формулы!
    3. Столбец с итоговым временем выполнения процесса
    4. Просто ставим ноль.

![](../../data/22-images/12807-5-image.png){width=70%}

- Дальше "растяните" эту формулу для всех остальных ячеек.
- (*Для пользователей LibreOffice*) Если у вас вышла ошибка `#Н/Д` (при этом вы всё сделали правильно до этого пункта), напишите формулу `=ЕСЛИОШИБКА(наша формула ВПР;0)`.
- Получаем следующее:

![](../../data/22-images/12807-6-image.png){width=70%}

6) Находим макс. число из столбца с результатами времени работы каждого процесса и получаем ответ: \boxed{37}

\section{Сдвиги процессов}

![](../../data/22-images/12447-kompege.png)

1) Сделаем все как раньше, только добавим еще одну колонку для начала работы процесса:

![](../../data/22-images/12447-1-image.png)

2) В колонку с началом работы процесса напишем формулу (для первой клетки): `=H2-B2 + 1`. Почему добавляем один обсуждается в пункте \ref{2}:

![](../../data/22-images/12447-2-image.png){width=50%}

3) Далее пишем цифры следующим образом:

![](../../data/22-images/12447-3-image.png){width=50%}

- Это необходимо для "разметки" работы процессов.

4) Пишем формулу `ЕСЛИ(И($G2<=I$1,$He>=I$1),1,"")`. Поясню за каждый аргумент:
    - `$G2<=I$1` - текущее время должно быть больше или равно того времени, с которого наш процесс уже работает. Фиксируем у времени начала только буквы, т.к. ее столбец нам нужен. У текущего времени в "разметке" фиксируем только строку.
    - `$H2>=I$1` - аналогично с предыдущим, только здесь мы фиксируем конец.
    - Таблицу заполняем пустотой, а не нулями.

![](../../data/22-images/12447-4-image.png){width=80%}

5) Мы можем передвигать независимые процессы и их зависимости. Для этого будем изменять столбец со значениями конца работы процесса (т.е. столбец `H`).

6) Сделав некоторы махинации с независимыми процессами получаем следующее:

![](../../data/22-images/12447-5-image.png){widht=80%}

7) Нам нужно найти непрерывное кол-во столбцов, в которых 4 единицы. Следовательно, ответ: \boxed{16}


\section{Советы}

\begin{enumerate}
    \item Если в задаче говорится о задержке для процесса \texttt{B}, который зависит от процесса \texttt{A}, (или что-то в этом роде), то к результату, где находится итоговое время работы процесса добавляем условие:
    \begin{itemize}
        \item если текущий процесс независим, то берем время работы процесса, иначе плюсуем к нему еще задержку и макс/мин время работы процессов, от которых он зависим.
        \item Например, время работы процесса находится в ячейке \texttt{B2}. Формула для него будет примерно следующей: \texttt{=ЕСЛИ(С2=0;B2;B2 + 3 + МИН/МАКС)}. Здесь \texttt{C2} - ячейка, в которой находится информация о зависимостях текущего процесса. Если он зависит от нулевого процесса, то данный процесс независим, иначе у него есть зависимости, в связи с чем нужно добавлять задержку.
    \end{itemize}
    \item Если неизвестно время работы одного процесса, то ставим ноль, используем \texttt{ВПР} и постепенно увеличиваем время, пока итоговый ответ не подойдет под условие (например, итоговое время не должно быть больше 100 мс).
    \item Если же неизвестен процесс, то работа аналогично, как с неизвестным временем работы (т.е. просто подставляем ID процесса, пока не получим валидный ответ).
    \item Если нужно найти активные процессы, которые будут, например, активны на 200 мс, то нужно создать еще одну колонку, где будет начало работы процесса. \label{2}
    \begin{itemize}
        \item Одна колонка с началом работы процесса + 1. Начало работы мы можем найти после вычитания длительности работы и полной работы процеса. Причем это начало работы будет относительно всего времени работы процессов. Плюс один необходим, т.к. после данного вычитания мы получим время, после которого начнется работа самого процесса. Именно поэтому прибавляем один.
        \item Одна колонка для времени работы процессов.
        \item Далее с помощью формулы \texttt{ЕСЛИ} находим процессы, чье время работы либо заканчивается до, либо начинается до или с 200 мс. Т.е. \texttt{начало работы процесса <= 200 <= конец работы}.
    \end{itemize}
    \item Если в условии сказано, что "нужно найти кол-во процессов активных на 32-й мс после начала работы первого процесса" (или что-то в этом роде), то не нужно ко времени работы всех процессов (кроме первого) прибавлять время первого. Это условие подразумевает нахождение тех процессов, которые активны на 32-й мс относительно всего времени и запущены после первого процесса.
\end{enumerate}
